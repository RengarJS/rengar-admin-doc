import{_ as a,c as e,o as i,ae as n}from"./chunks/framework.DDmtCRY9.js";const k=JSON.parse('{"title":"monorepo 介绍","description":"","frontmatter":{},"headers":[],"relativePath":"start/monorepo.md","filePath":"start/monorepo.md"}'),p={name:"start/monorepo.md"};function l(t,s,r,o,d,h){return i(),e("div",null,s[0]||(s[0]=[n(`<h1 id="monorepo-介绍" tabindex="-1">monorepo 介绍 <a class="header-anchor" href="#monorepo-介绍" aria-label="Permalink to &quot;monorepo 介绍&quot;">​</a></h1><p>请先阅读<a href="https://pnpm.io/zh/workspaces" target="_blank" rel="noreferrer">pnpm monorepo</a>详解。</p><p><code>monorepo</code> 是一个概念，它代表一个仓库中包含多个子项目，这些子项目可以共享相同的依赖，也可以共享相同的构建工具。本项目里使用基于<code>pnpm</code>的\`monorepo 能力。</p><p>pnpm 使用<code>monorepo</code>架构只需在根目录新建<code>pnpm-workspace.yaml</code>，<code>rengar-admin</code>的配置如下：</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">packages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # packages/ 直接子目录中的所有包</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;packages/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 排除测试目录中的包</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;!**/test/**&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="全局依赖" tabindex="-1">全局依赖 <a class="header-anchor" href="#全局依赖" aria-label="Permalink to &quot;全局依赖&quot;">​</a></h2><p>在使用了了<code>monorepo</code>之后，根目录的<code>package.json</code>里面的依赖叫做<strong>全局依赖</strong>，所有制的子包都能直接访问，无需在子包安装</p><p>安装全局依赖命令如下：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dayjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -w</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>其中<code>-w</code>不能省略。</p><h2 id="子包依赖" tabindex="-1">子包依赖 <a class="header-anchor" href="#子包依赖" aria-label="Permalink to &quot;子包依赖&quot;">​</a></h2><p>子包依赖安装命令如下：</p><p>一种方式是不用切换到子包的目录：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dayjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -F</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @rengar-admin/axios</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>一种是切换到子包所在的目录，执行：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dayjs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,16)]))}const m=a(p,[["render",l]]);export{k as __pageData,m as default};
